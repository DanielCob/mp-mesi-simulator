# ============================================================================
# Producto Punto Paralelo - PE0
# ============================================================================
# Segmento: A[0-3] · B[0-3]
# Vector A: direcciones 0-15 (16 elementos)
# Vector B: direcciones 100-115 (16 elementos)
# Resultado parcial: dirección 200
# ============================================================================

# Inicializar acumulador
# R2 ya está inicializado en 0.0 al inicio del programa

# ============================================================================
# Calcular A[0] * B[0]
# ============================================================================
LOAD R4, [0]      # R4 = A[0]
LOAD R6, [100]    # R6 = B[0]
FMUL R7, R4, R6   # R7 = A[0] * B[0]
FADD R2, R2, R7   # R2 += A[0] * B[0]

# ============================================================================
# Calcular A[1] * B[1]
# ============================================================================
LOAD R4, [1]      # R4 = A[1]
LOAD R6, [101]    # R6 = B[1]
FMUL R7, R4, R6   # R7 = A[1] * B[1]
FADD R2, R2, R7   # R2 += A[1] * B[1]

# ============================================================================
# Calcular A[2] * B[2]
# ============================================================================
LOAD R4, [2]      # R4 = A[2]
LOAD R6, [102]    # R6 = B[2]
FMUL R7, R4, R6   # R7 = A[2] * B[2]
FADD R2, R2, R7   # R2 += A[2] * B[2]

# ============================================================================
# Calcular A[3] * B[3]
# ============================================================================
LOAD R4, [3]      # R4 = A[3]
LOAD R6, [103]    # R6 = B[3]
FMUL R7, R4, R6   # R7 = A[3] * B[3]
FADD R2, R2, R7   # R2 += A[3] * B[3]

# ============================================================================
# Guardar resultado parcial en memoria compartida
# ============================================================================
STORE R2, [200]   # Guardar producto parcial de PE0 en dirección 200

# ============================================================================
# Marcar flag de sincronización (barrier)
# ============================================================================
MOV R3, 1.0       # R3 = 1.0 (valor inmediato)
STORE R3, [220]   # Flag PE0 = 1.0 (señala que PE0 terminó)

# Fin del programa
HALT
